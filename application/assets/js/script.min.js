$(document).ready(function(){var n=L.map("map",{zoomControl:!1,dragging:!1,keyboard:!0}).fitWorld();L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(n);var e={url:"https://nominatim.openstreetmap.org/search?format=json&q={s}",jsonpParam:"json_callback",formatData:function(e){var o,a,t={},n=[];for(var r in e)o=(n=e[r].display_name.split(","))[0]+", "+n[1],a=L.latLng(e[r].lat,e[r].lon),t[o]=a;return t},textPlaceholder:"Search...",autoType:!0,tipAutoSubmit:!0,autoCollapse:!0,collapsed:!1,autoCollapseTime:2e4,delayType:1800,marker:{icon:!0}};n.addControl(new L.Control.Search(e));var r="";n.on("locationfound",function(e){r=L.marker(e.latlng).addTo(n)}),n.on("locationerror",function(e){alert(e.message)}),n.locate({setView:!0,maxZoom:16});var a=navigator.getDeviceStorage("sdcard");a.available().onsuccess=function(){if("available"==this.result){var e=a.get("/sdcard/gpx/montoz.gpx");e.onsuccess=function(){var e=this.result.name;alert('File "'+e+'" successfully retrieved from the sdcard storage area');var o=this.result.name;new L.GPX(o,{async:!0}).on("loaded",function(e){n.fitBounds(e.target.getBounds())}).addTo(n)},e.onerror=function(){alert("Unable to get the file: "+this.error.name)};var o=a.enumerate();o.onsuccess=function(){if(null!==o.result.name){o.result;this.continue()}},o.onerror=function(){alert("No file found: "+this.error.name)}}else"unavailable"==this.result?console.log("The SDcard on your device is not available"):console.log("The SDCard on your device is shared and thus not available")};var s=.001,i=0,l=0,c=16;function d(o){function e(e){r.setLatLng([e.coords.latitude,e.coords.longitude]).update(),n.panTo(new L.LatLng(e.coords.latitude,e.coords.longitude)),1==o&&("-3000"==$("div#currentPosition").css("z-index")?($("div#currentPosition").css("z-index","3000"),$("div#currentPosition > div").text("Latitude: "+e.coords.latitude+" / Longitude: "+e.coords.longitude)):$("div#currentPosition").css("z-index","-3000"))}navigator.geolocation?navigator.geolocation.getCurrentPosition(e):alert("New Position not found.")}$(".leaflet-control-search").css("display","none"),document.addEventListener("keydown",function(e){switch(e.key){case"SoftLeft":n.setZoom(n.getZoom()+1),c=n.getZoom();break;case"SoftRight":n.setZoom(n.getZoom()-1),c=n.getZoom();break;case"Enter":!function(){l=i=0;var e=r.getLatLng(),o=e.lat,a=e.lng;n.panTo(new L.LatLng(o,a))}();break;case"1":d(!1);break;case"2":"none"==$(".leaflet-control-search").css("display")?($(".leaflet-control-search").css("display","block"),$(".leaflet-control-search").find("input").focus()):$(".leaflet-control-search").css("display","none");break;case"ArrowRight":i++;var o=(t=r.getLatLng()).lat+l*s,a=t.lng+i*s;n.panTo(new L.LatLng(o,a));break;case"ArrowLeft":i--,o=(t=r.getLatLng()).lat+l*s,a=t.lng+i*s,n.panTo(new L.LatLng(o,a));break;case"ArrowUp":l++,o=(t=r.getLatLng()).lat+l*s,a=t.lng+i*s,n.panTo(new L.LatLng(o,a));break;case"ArrowDown":var t;l--,o=(t=r.getLatLng()).lat+l*s,a=t.lng+i*s,n.panTo(new L.LatLng(o,a));break;case"0":"none"==$("div#man-page").css("display")?($("div#man-page").css("display","block"),$("div#man-page").find("input").focus()):$("div#man-page").css("display","none");break;case"3":d(!0)}c<6&&(s=1,document.getElementById("zoom-level").innerHTML=c+s),6<c&&(s=.1,document.getElementById("zoom-level").innerHTML=c+s),12<c&&(s=.001,document.getElementById("zoom-level").innerHTML=c+s)})});